### RANDOM
power_level:
  alias: Say power level
  sequence:
    - service: tts.google_say
      data_template:
        entity_id: "media_player.homecas"
        message: "It is probably a little bit over {{ (1000*(states('sensor.power_consumption')|float))|round }} Watts!"

### SCENES

#reset lights to currently selected scene
reset_scene:
  alias: Reset selected scene
  sequence:
    - service: scene.turn_on
      data_template:
        entity_id: scene.{{ states('input_select.scene') }}

#set scene based on time of day (for home arrivals and wakeup routines)
set_scene:
  alias: Set current scene
  sequence:
    - service: scene.turn_on
      data_template:
        entity_id: >
          {% if states('sensor.time_of_day') == "Evening" or states('sensor.time_of_day') == "Early Evening" %}
            scene.evening
          {% elif states('sensor.time_of_day') == "Day" or states('sensor.time_of_day') == "Afternoon" %}
            scene.day
          {% else %}
            scene.morning
          {% endif %}

### IR
soundbar_next_source:
  alias: Soundbar next source
  sequence:
  - service: broadlink.send
    data:
      host: '192.168.3.200'
      packet:
      ## Switch between optical 1 and 2
      - 'JgBOAJWTFBEUERQ2FDYUERQ1FRAUERQRFBEUNhQ2FBEUNhQRExEUERQ2FDYUERQ2FDYUERM2FDYUERQRFDYUERQRFDUVERMABgeUlBQ2FAANBQAAAAAAAAAAAAA='
      ## ALTERNATIVELY: Switch through all inputs
      #- 'JgBGAJWTFBEUERQ2FDYUERQ1FRAVEBUQFBEUNhQ2FBEUNhQRFBAVEBU1FRAUNhQRFBEUERQ2FDUVEBU1FBEUNhQ2FDYUERQADQUAAA=='

soundbar_vol_up:
  alias: Soundbar volume up
  sequence:
  - service: broadlink.send
    data:
      host: '192.168.3.200'
      packet:
      - 'JgBOAJSVExITEhM3EjcTEhM3ExITEhMSExITNxM3ExITNxMSEhITNxM3EzcTEhM3ExIUERMSExITEhMSEzcSExI3EzcTNxMABgiUlRM3EwANBQAAAAAAAAAAAAA='

soundbar_vol_down:
  alias: Soundbar volume down
  sequence:
  - service: broadlink.send
    data:
      host: '192.168.3.200'
      packet:
      - 'JgBOAJSVExITEhM3EjcTEhM3ExITEhMSExITNxM3ExITNxMSEhMSEhQ2EzcTEhM3ExITEhMSEzcTEhMSEzcTEhI3EzcTNxMABgiUlRM3EwANBQAAAAAAAAAAAAA='